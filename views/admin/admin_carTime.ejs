<!doctype html>
<html lang="en">
<head>
	<% include templates/admin_head.ejs %>
</head>
<body id="top">

<!-- Preloader -->
<!-- <div id="preloader">
	<div id="status">
		<div class="loader"></div>
	</div>
</div> -->
<!-- /Preloader -->

<div id="body-wrapper" class="body-container">

	<!-- Header begins -->
	<header class="main-nav clearfix">
		<% include templates/admin_header.ejs %>
	</header>
	<!-- /Header ends -->

	<!-- 네비게이션!@!@-->
	<aside class="menu">
		<div class="left-aside-container">			
			<% include templates/admin_sidebar.ejs %>
			<!-- /User profile -->
			<!-- Main menu -->
			<div class="menu-container">
				
			</div>
			<!-- /Main menu -->
		</div>
	</aside>
	<!-- /Sidebar -->

	<!-- Page container begins -->
	<section class="main-container">
		<h1 style="display:none">Empty Heading</h1>

			<!--Page Header-->
			<div class="header">
				<div class="header-content">
					<div class="page-title">
						<i class="icon-table2 position-left"></i> Advanced datatable
					</div>
				</div>
			</div>
			<!--/Page Header-->

			<div class="container-fluid page-content">

				<!-- Individual column searching (text fields) -->
				<div class="card card-inverse card-flat table-responsive">
					<div class="card-header">
						<div class="card-title">Individual column searching <span class="text-semibold">(Text fields)</span></div>
					</div>
					<div class="card-block p-b-0">
						<p>Individual columns searching with <code>text inputs</code>. It can be used by adding <code>column().search()</code> method to the datatable.</p>
					</div>
					<div class="table-responsive">
					<table class="table datatable-button-init-basic" id="tList">
						<thead>
							<tr>
								<th>CT_ID</th>
								<th>CT_CY_ID</th>
								<th>B_Name</th>
								<th>CT_DepartureTe</th>
								<th>CT_ReturnTe</th>
								<th>CT_LeadTe</th>
								<th>CT_CarNum</th>
								<th>CT_DriverName</th>
								<th>CT_DriverPhone</th>
								<th class="text-center">Edit</th>
								<th class="text-center">Delete</th>
							</tr>
						</thead>
						<tbody>
							<% for(let i=0; i<data.length; i++){ %>
							<tr>
								<td><%=data[i].CT_ID%></td>
								<td><%=data[i].CT_CY_ID%></td>
								<td><%=data[i].B_Name%></td>
								<td><%=data[i].CT_DepartureTe%></td>
								<td><%=data[i].CT_ReturnTe%></td>
								<td><%=data[i].CT_LeadTe%></td>
								<td><%=data[i].CT_CarNum%></td>
								<td><%=data[i].CT_DriverName%></td>
								<td><%=data[i].CT_DriverPhone%></td>
								<td><a class="dropdown-item" id="edit" id='<%=data[i].CT_ID%>' onclick="edit(this)"><i class="icon-pencil6"></i> Edit</a></td>
								<td><a href="#" class="dropdown-item" id='<%=data[i].CT_ID%>' onclick="del(this)"><i class="icon-trash"></i> Delete</a></td>
								
							<% } %>  
							
						</tbody>
	
					</table>
				</div>
				</div>
			</div>

		</section>
		<!-- /Page Container ends -->
		<!-- ScrolltoTop -->
		<!-- <a id="scrollTop" href="#top"><i class="icon-arrow-up12"></i></a> -->
		<!-- /ScrolltoTop -->
		<% include templates/admin_footer.ejs %>
	</div>

	<script>
	// var editor; // use a global for the submit and return data rendering in the examples
 
	// $(document).ready(function() {
	// 	editor = new $.fn.dataTable.Editor( {
	// 		ajax: "/admin/carTime/modify",
	// 		table: "#tList",
	// 		fields: [ {
	// 			label: "B_Name:",
	// 				name: "bName"
	// 			}, {
	// 				label: "CT_DepartureTe:",
	// 				name: "dept",
	// 				type: "datetime"
	// 			}, {
	// 				label: "CT_ReturnTe:",
	// 				name: "retu",
	// 				type: "datetime"
	// 			}, {
	// 				label: "CT_LeadTe:",
	// 				name: "lead",
	// 				type: "datetime"
	// 			}, {
	// 				label: "CT_CarNum:",
	// 				name: "carNum"
	// 			}, {
	// 				label: "CT_DriverName:",
	// 				name: "dName",
	// 			}, {
	// 				label: "CT_DriverPhone:",
	// 				name: "dPhone"
	// 			}
	// 		]
	// 	} );
	
	// 	// Activate an inline edit on click of a table cell
	// 	$('#edit').on('click', 'tbody td', function () {
	// 		alert('dd')
	// 		editor.inline( this );
	// 	} );
	
	// 	$('#tList').DataTable( {
	// 		dom: "Bfrtip",
	// 		ajax: "../php/staff.php",
	// 		order: [[ 1, 'asc' ]],
	// 		columns: [
	// 			{
	// 				data: null,
	// 				defaultContent: '',
	// 				className: 'select-checkbox',
	// 				orderable: false
	// 			},
	// 			{ data: "bName" },
	// 			{ data: "dept" },
	// 			{ data: "retu" },
	// 			{ data: "lead" },
	// 			{ data: "carNum" },
	// 			{ data: "salary", render: $.fn.dataTable.render.number( ',', '.', 0, '$' ) }
	// 		],
	// 		select: {
	// 			style:    'os',
	// 			selector: 'td:first-child'
	// 		},
	// 		buttons: [
	// 			{ extend: "create", editor: editor },
	// 			{ extend: "edit",   editor: editor },
	// 			{ extend: "remove", editor: editor }
	// 		]
	// 	} );
	// } );
	
	function del(e){
      let ctId = e.id;
      $.ajax({
        url: '/admin/carTimeDelete',
        method: 'post',
        dataType: 'json',
        data: {'ctId' : ctId},
        success: function(res){
			alert("삭제");
			location.reload();
        }
      })
  }
	</script>
</body>
</html>
