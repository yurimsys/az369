<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>AZ369 보세의류쇼핑몰</title>
    <link rel="stylesheet" href="css/join_02.css">


    <!--자바스크립트-->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/scrolla.jquery.min.js"></script>


    <!--폰트-->
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR|PT+Serif&display=swap" rel="stylesheet">


</head>

<body>
    <div class="wrap">

        <header>

            <!--모바일 아이콘 열기-->
            <a href="#" class="open"><img src="img/btn_berger_m.png" alt="메뉴열기"></a>

            <div class="innerHeader">
                <h1 class="logo">
                    <a href="index.asp"><img src="./img/main/logo2.png" alt="센트럴돔 로고"></a>
                </h1>
                <nav class="gnb">
                    <ul>
                        <li><a href="summary.asp" class="gnb_link">사업안내</a>
                            <ul>
                                <li><a href="summary.asp">사업개요</a></li>
                                <li><a href="ctd_info.asp">센트럴돔 소개</a></li>
                                <li><a href="location.asp">오시는 길</a></li>
                            </ul>
                        </li>
                        <li><a href="benefit.asp" class="gnb_link">입점신청 및 혜택</a>
                            <ul>
                                <li><a href="benefit.asp">입점 상가 혜택</a></li>
                                <li><a href="benefit_application.asp">입점 상담 신청</a></li>
                            </ul>
                        </li>
                        <li><a href="vehicle.asp" class="gnb_link">장차예매</a>
                            <ul>
                                <li><a href="vehicle.asp">장차운행안내</a></li>
                                <li><a href="reservation_01.asp">장차예매신청</a></li>
                                <li><a href="mypage.asp">장차예매현황</a></li>
                            </ul>
                        </li>
                    </ul>
                </nav>
                
                <nav class="gnb2">
                   <ul>
                       <li><a href="login.asp">로그인</a></li>
                        <li><a href="join_01.asp">회원가입</a></li>
                        <li><div class="tooltip">전화문의
                            <span class="tooltiptext">031 - 668 - 0116</span></div>
                  </li>
                   </ul>
                </nav>
                <!--<div class="call">
                    문의 <span>031 - 668 - 0116</span>
                </div>-->
                
            </div>

            <!--모바일 메뉴-->
            <nav class="gnb_mo">
                <a href="#" class="close"><img src="img/btn_gnb_close.png" alt="메뉴닫기"></a>
                
                <ul>
                   <!--<li class="login_gnb_mo">
                    <ul>
                        <li><a href="login.html">로그인</a></li>
                        <li><a href="join_01.html">회원가입</a></li>
                    </ul>
                   </li>-->
                    <li>
                        <a href="#">사업안내</a>
                        <ul class="inner">
                            <li><a href="summary.asp">사업개요</a></li>
                            <li><a href="ctd_info.asp">센트럴돔 소개</a></li>
                            <li><a href="location.asp">오시는 길</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#">입점신청 및 혜택</a>
                        <ul class="inner">
                            <li><a href="benefit.asp">입점상가혜택</a></li>
                            <li><a href="benefit_application.asp">입점상담신청</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#">장차예매</a>
                        <ul class="inner">
                            <li><a href="vehicle.asp">장차운행안내</a></li>
                            <li><a href="reservation_01.html">장차예약신청</a></li>
                            <li><a href="mypage.html">장차예매현황</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </header>

        <!--// header완료-->
        <!--section.main 시작-->

        <section class="main">
            <div class="inner_main">
                <div class="main_bg"></div>
                <div class="tnb">
                    <ul>
                        <a href="login.html">
                            <li>로그인</li>
                        </a>
                        <a href="join_01.html">
                            <li style="background: #ad8743; color: #fff">회원가입</li>
                        </a>
                        <a href="mypage.html">
                            <li>장차예매현황</li>
                        </a>
                    </ul>
                </div>
            </div>
        </section>


        <!--//secton.main 완료-->
        <!--secton.sub_wrap 시작-->


        <section class="sub_wrap">
            <div class="inner_sub_wrap">

                <h6>회원가입</h6>
                <h1 style="font-family: 'PT Serif', serif;">JOIN</h1>
                <div class="bar"></div>


                <div class="join_box">
                    <div class="join_process">약관동의 > <span>정보입력 ></span> 가입완료</div>

                    <h2>02. 정보입력</h2>

                    <h3>회원정보를 입력해주세요.</h3>
                    <form action="/action_page.php">
                        <ul>
                            <li>
                                <label for="name"></label>
                                <input type="text" id="id" name="아이디" placeholder="아이디">

                            </li>
                            <li>
                                <button type="button" onclick="idOver()">중복확인</button>
                            </li>

                            <li>
                                <label for="password"></label>
                                <input type="password" id="password" name="패스워드" placeholder="비밀번호 (영문 + 숫자 + 특문 포함 10글자 이상)">
                            </li>

                            <li>
                                <label for="password2"></label>
                                <input type="password" id="password2" name="패스워드" placeholder="비밀번호 확인">
                            </li>

                            <li>
                                <label for="name"></label>
                                <input type="text" id="name" name="이름" placeholder="이름">
                            </li>



                            <li>
                                <label for="phone"></label>
                                <input type="text" id="phone" name="휴대전화" placeholder="휴대전화">
                            </li>

                            <li>
                                <label for="email"></label>
                                <input type="text" id="email" name="이메일" placeholder="이메일주소">
                            </li>

                            <!--
                            <li>
                                <button onclick="phone_check">본인인증</button>
                            </li>

                            <li>
                                <label for="phone2"></label>
                                <input type="text" id="phone2" name="휴대전화" placeholder="인증번호 6자리를 입력하세요." style="background: #eee;">
                            </li>
-->

                            <li>
                                <label for="brand"></label>
                                <input type="text" id="brand" name="브랜드" placeholder="브랜드명">
                            </li>

                            <div class="address_form">
                                <input type="text" id="postcode" name="postcode" placeholder="매장 우편번호" style="background: #f8f8f8;">
                                <button type="button" onclick="execDaumPostcode()" value="우편번호 찾기" class="btn-primary round">우편번호찾기</button><br>
                                <input type="text" id="address" name="address" placeholder="매장주소" style="background: #f8f8f8;"><br>
                                <input type="text" id="detailAddress" name="detailAddress" placeholder="매장상세주소">
                                <input type="text" id="extraAddress" name="extraAddress" hidden=""> <!-- 기본정보  -->
                                <input type="text" id="roadAddress" name="roadAddress" hidden="">
                                <input type="text" id="jibunAddress" name="jibunAddress" hidden="">
                            </div>
                        </ul>
                    </form>

                    <div class="survey_box">

                        <h3>선호하는 장차이용시간을 선택해주세요.</h3>
                        
                        <div class="day">
                           <h4>장차운행요일 <span style="font-size: 14px; color: #555;">(매주 밤 운행)</span></h4>
                            <ul>
                                <li>
                                    <label>
                                        <input type="checkbox" name="day">
                                        <span>월</span>
                                    </label>
                                </li>

                                <li>
                                    <label>
                                        <input type="checkbox" name="day">
                                        <span>화</span>
                                    </label>
                                </li>

                                <li>
                                    <label>
                                        <input type="checkbox" name="day">
                                        <span>수</span>
                                    </label>
                                </li>

                                <li>
                                    <label>
                                        <input type="checkbox" name="day">
                                        <span>목</span>
                                    </label>
                                </li>

                                <li>
                                    <label>
                                        <input type="checkbox" name="day">
                                        <span>금</span>
                                    </label>
                                </li>
                            </ul>
                        </div>

                       
                        <div class="time">
                           <h4>장차운행시간</h4>
                            <ul>
                                <li>
                                    <div class="time_select01 time_select" >
                                        <select>
                                            <option value="0">평택 출발시간</option>
                                            <option value="1">평택 20:00</option>
                                            <option value="2">평택 21:00</option>
                                            <option value="3">평택 22:00</option>
                                            <option value="3">평택 23:00</option>

                                        </select>
                                    </div>
                                </li>
                                <li><img src="img/reservation/location_icon.png" alt="왕복 아이콘">

                                </li>

                                <li>
                                    <div class="time_select02 time_select" >
                                        <select>
                                            <option value="0">서울동대문 출발시간</option>
                                            <option value="1">서울동대문 02:00</option>
                                            <option value="2">서울동대문 03:00</option>
                                            <option value="3">서울동대문 04:00</option>
                                            <option value="4">서울동대문 05:00</option>
                                        </select>
                                    </div>
                                </li>
                            </ul>
                        </div>

                    </div>

                    <div class="join_btn">
                        <ul>
                            <a href="join_01.html">
                                <li class="back">이전</li>
                            </a>
                            <a onclick="joinUser()">
                                <li class="next">다음</li>
                            </a>
                        </ul>
                    </div>




                </div>



            </div>
        </section>

        <!--//secton.about 완료-->


        <!--<footer></footer>-->
    </div>

    <!-- 다음 주소 API -->
    <script src="js/join_address.js"></script>
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

    <script>
	
        //비밀번호 확인
         $(function(){ 
                $("#alert-success").hide();
                $("#alert-danger").hide();
                $("input").keyup(function(){ 
                    var pwd1=$("#password").val(); 
                    var pwd2=$("#password2").val();
                    if(pwd1 != "" || pwd2 != ""){ 
                        if(pwd1 == pwd2){ 
                            $("#alert-success").show();
                            $("#alert-danger").hide(); 
                            $("#submit").removeAttr("disabled"); 
                            }else{
                            $("#alert-success").hide();
                            $("#alert-danger").show(); 
                            $("#submit").attr("disabled", "disabled");
                            } 
                        } 
                    }); 
                });

                            
                //회원가입 중복확인
                let checkCount = 0;  
                function idOver(){              
                    if($('#id').val() == ""){
                        alert("빈칸을 입력해 주세요");
                        return;
                    }
                    $.ajax({
                        method : "post", 
                        dataType: 'json',                     
                        url : "api/user/overlap",
                        data :{
                            id : $("#id").val()

                        },
                        success: function(res){
                           console.log(res);
                           console.log(res.data);
                            // if(res.data == 0){                                
                            //     alert("아이디 사용가능 하십니다.");
                            // } else {
                            //     alert("아이디 중복입니다.");
                            // }      

                            console.log(res.data);
                            if(res.data === undefined){
                                checkCount = 1;
                                alert (
                                    
                                    "아이디 사용가능 합니다."
                                );
                            } else if(res.data.U_UserName === $("#id").val()){
                                alert ( "아이디 중복입니다.");
                            }
                           
                                           
                        }                      
                    })                                                                                                                           
                };
                                                                     
               ///회원가입 버튼 클릭
                function joinUser(){  
                    if(checkCount == 0){
                        alert("아이디 중복확인을 해주세요.", checkCount);
                        return;     
                    }     
                    if($('#id').val() == "" || $('#password').val()==''|| $('#password2').val()==''|| $('#name').val()=='' || $('#phone').val()==''|| $('#brand').val()=='' || 
                	$('#postcode').val()==''|| $('#address').val()==''||$('#detailAddress').val()=='' ||$('#email').val()==''){
         			alert("빈칸을 입력해 주세요");
         			return;
                     }
                    $.ajax({
                        method : 'POST',
                        dataType : 'json',
                        url: "api/user/join",
                        data: {
                            id : $("#id").val(),
                            password : $("#password").val(),
                            name : $("#name").val(),
                            phone : $("#phone").val(),
                            email : $("#email").val(),
                            brand : $("#brand").val(),
                            postcode : $("#postcode").val(),
                            address : $("#address").val(),
                            detailAddress : $("#detailAddress").val()
                        }
                    }).done(function(res){
                        console.log(res);
                        console.log(res.name);
                        console.log(res.id);
                        var orderDetail = [{name:"findId", value:res.name }, {name:"findName", value:res.id}];
                        sessionStorage.setItem("orderDetail",JSON.stringify(orderDetail));
                        location.href = "join3"
                        
                    });

                }

        
        </script>

    <script>
        'use sctrict';

        //gnb scroll 
        //고정헤더, 사이드바 이벤트
        var scrollTop = 0;
        scrollTop = $(document).scrollTop();
        fixHeader();

        //윈도우창 조절시에 이벤트
        $(window).on('scroll resize', function() {
            scrollTop = $(document).scrollTop();
            fixHeader();

        });

        //고정헤더 함수
        function fixHeader() {
            if (scrollTop > 200) {
                $('header').addClass('on');
            } else {
                $('header').removeClass('on');
            }
        }


        //모바일 모드 gnb_mo

        setGnbMo();

        function setGnbMo() {
            $('header .open').on('click', function() {
                $('.gnb_mo').addClass('on');
            }); //햄버거버튼
            $('.gnb_mo .close').on('click', function() {
                $('.gnb_mo').removeClass('on');
                $('.gnb_mo > ul > li .inner').slideUp(); //하위메뉴
                $('.gnb_mo > ul > li > a').removeClass('on')
            });


            //inner메뉴 열기

            $('.gnb_mo > ul > li > a').on('click', function() {
                $(this).next().slideToggle();
                $(this).toggleClass('on'); //토글 클래스를 추가하고 빼고.
            });
        }
        
    </script>


        


        
        
        <script>
            var x, i, j, selElmnt, a, b, c;
        x = document.getElementsByClassName("time_select");
        for (i = 0; i < x.length; i++) {
            selElmnt = x[i].getElementsByTagName("select")[0];
            /*for each element, create a new DIV that will act as the selected item:*/
            a = document.createElement("DIV");
            a.setAttribute("class", "select-selected");
            a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
            x[i].appendChild(a);
            /*for each element, create a new DIV that will contain the option list:*/
            b = document.createElement("DIV");
            b.setAttribute("class", "select-items select-hide");
            for (j = 1; j < selElmnt.length; j++) {
                /*for each option in the original select element,
                create a new DIV that will act as an option item:*/
                c = document.createElement("DIV");
                c.innerHTML = selElmnt.options[j].innerHTML;
                c.addEventListener("click", function(e) {
                    /*when an item is clicked, update the original select box,
                    and the selected item:*/
                    var y, i, k, s, h;
                    s = this.parentNode.parentNode.getElementsByTagName("select")[0];
                    h = this.parentNode.previousSibling;
                    for (i = 0; i < s.length; i++) {
                        if (s.options[i].innerHTML == this.innerHTML) {
                            s.selectedIndex = i;
                            h.innerHTML = this.innerHTML;
                            y = this.parentNode.getElementsByClassName("same-as-selected");
                            for (k = 0; k < y.length; k++) {
                                y[k].removeAttribute("class");
                            }
                            this.setAttribute("class", "same-as-selected");
                            break;
                        }
                    }
                    h.click();
                });
                b.appendChild(c);
            }
            x[i].appendChild(b);
            a.addEventListener("click", function(e) {
                /*when the select box is clicked, close any other select boxes,
                and open/close the current select box:*/
                e.stopPropagation();
                closeAllSelect(this);
                this.nextSibling.classList.toggle("select-hide");
                this.classList.toggle("select-arrow-active");
            });
        }

        function closeAllSelect(elmnt) {
            /*a function that will close all select boxes in the document,
            except the current select box:*/
            var x, y, i, arrNo = [];
            x = document.getElementsByClassName("select-items");
            y = document.getElementsByClassName("select-selected");
            for (i = 0; i < y.length; i++) {
                if (elmnt == y[i]) {
                    arrNo.push(i)
                } else {
                    y[i].classList.remove("select-arrow-active");
                }
            }
            for (i = 0; i < x.length; i++) {
                if (arrNo.indexOf(i)) {
                    x[i].classList.add("select-hide");
                }
            }
        }
        /*if the user clicks anywhere outside the select box,
        then close all select boxes:*/
        document.addEventListener("click", closeAllSelect);
    </script>
</body></html>
